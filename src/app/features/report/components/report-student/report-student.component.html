<div class="container myContentClass">
    <span *ngIf="isStudentOwner">
        <h2 class="card-subheading center" >Liste de vos rapports de stage</h2><br>
        <p class="card-heading"><small>Ci-dessous vous trouverez la liste de tout les rapports de stages/projects que vous avez soumis.</small></p><hr>
    </span>
    <span *ngIf="!isStudentOwner">
        <h2 class="card-subheading center" style="width: 70%;">Liste des rapports de stage de l'étudiant</h2><br>
        <p class="card-heading"><small>Ci-dessous vous trouverez la liste de tout les rapports de stages/projects que l'étudiant avait soumis.</small></p><hr>
    </span>

    <!-- <div class="tooltip">Hover over me
        <span class="tooltiptext">Tooltip text</span>
    </div> -->

    <div  *ngFor="let report of reports; let i = index"
        [class.active]="i == currentIndex"
        (click)="setActiveReport(report, i)" style="padding: 0.4%;">
        <article class="postcard light blue" style="height: 200px; margin: 0%;" >
            <!-- <a class="postcard__img_link" href="#">
                <img class="postcard__img" src="https://picsum.photos/1000/1000" alt="Image Title" />
            </a> -->
            <div class="postcard__text t-dark">
                <div class="row">
                    <div class="col-6">
                        <h5>
                            <I><b>{{ report.stage_ou_projet ? "Stage" : "Projet" }} : </b></I>
                            <a routerLink="/rapport/info/{{ report.id }}">{{ capitalizeFirstLetter(report.intitule_stage) }}</a>
                        </h5>
                        
                        <div class="postcard__subtitle small">
                        <span *ngIf="!isStudentOwner"><i class="icon-user mr-2 "></i><span class="classLink"><a routerLink="/profile-etudiant/{{report.fk_etudiant.id}}" style="margin-right:20px;">{{ report.fk_etudiant.prenom }} {{ report.fk_etudiant.nom }}</a></span></span>
                        <time *ngIf="report.date_debut_stage && report.date_fin_stage"><i class="icon-calendar mr-2"></i> {{ report.horodateur  }}  </time>
                        </div>

                        <hr width="15%" align="left">
                        <div> <small>
                            {{ report.resume_rapport }}</small>
                        </div>

                        <div class="postcard__bar"></div>
                    </div>

                    <div class="col-6">
                        <span style="position:absolute; right:0;">
                        <ng-container *ngIf="(report.valid_admin && report.type_rapport!='PFE') || (report.type_rapport=='PFE' && report.valid_admin && report.valid_encadrant); else notValid" > 
                            <i class="iconAdminValidated fas fa-check-circle"></i> 
                        </ng-container>
                        </span>

                        <ng-template #notValid > 
                            <i class="iconAdminNotValidated fa fa-times-circle"></i> 
                        </ng-template>

                        <br>
                        <div *ngIf="report.stage_ou_projet">
                            <div>
                                <label><strong>Société de stage : </strong></label>
                                {{ capitalizeFirstLetter(report.societe_stage) }} <span *ngIf="report.secteur_societe != null">( {{ capitalizeFirstLetter(report.secteur_societe) }} )</span>
                            </div>
                            <div *ngIf="report.ville_societe!=null">
                                <label ><strong>Ville de stage : </strong></label>
                                {{ capitalizeFirstLetter(report.ville_societe) }} <span *ngIf="report.pays_societe != null">( {{ capitalizeFirstLetter(report.pays_societe) }} )</span>
                            </div>
                            <div *ngIf="report.ville_societe==null && report.pays_societe != null">
                                <label ><strong>Pays de stage : </strong></label><span > {{ capitalizeFirstLetter(report.pays_societe) }} </span>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-6"></div>
                            <div class="col-3" class="classLink" *ngIf="isStudentOwner || isAdministrator"><a href="/rapport/{{ report.id }}" ><u>modifier</u> </a></div>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <div class="col-3" class="classLink"><a href="/rapport/info/{{ report.id }}" ><u>plus de détails</u></a></div>
                        </div>
                    </div>
                </div>
                

                
            </div>
        </article>
    </div>
<hr>

<p class="myDisclaimer "><small>Dans cette page, vous trouverez l'ensemble des rapports que vous avez soumis, notez bien que ces derniers 
    doivent être accepté par l'administrateur de la plateforme avant qu'ils soient disponible sur
    celle-ci (l'état d'un rapport est affiché dans l'angle en haut à droite de la carte de celui-ci). Notez aussi que s'il s'agit d'un rapport
    liée à un stage PFE, le dernier devra passé par une deuxième étape de la validation de l'encadrant concerné avant qu'il soit accépté définitivement.
</small></p>

</div>
<app-spinner class="mySpinnerClass" message="" [class.hidden]="hideSpinner"></app-spinner>