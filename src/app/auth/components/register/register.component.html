<div class="container-login100" *ngIf="!isSuccessful && !isSignUpFailed">
  <div class="wrap-login100">
    <div class="login100-form">
      <span class="login100-form-title p-b-26" > Bienvenue</span>
      <br>
      <div class="text-center p-t-115" ><span class="txt1"> Veuillez vous inscrire avec votre adresse e-mail institutionnelle</span></div>
      <br>
      <div class="container-login100-form-btn">
        <div class="wrap-login100-form-btn">
          <div class="login100-form-bgbtn"></div>
          <button class="login100-form-btn" (click)="registerWithGoogle()">
            S'inscrire avec  <span class="icon-google mr-3" style="margin:20px;font-size:30px;"></span>
          </button>
                      
        </div>
      </div>
    </div>

  </div>
</div>


<div class="limiter" *ngIf="!isSuccessful && isSignUpFailed" >
  <div class="container-login100">
    <div class="wrap-login100">
      <form class="login100-form validate-form" name="form" #registerForm="ngForm">
        <!-- <span class="login100-form-title">
          <img class="img" src="assets/Img/iconLibrairieOrange.png" width="35%">
        </span> -->
        <span class="login100-form-title p-b-26" > Bienvenue</span>
        
        <br> 

        <div class="wrap-input100">
          <input type="radio" value=2 name="groupType" [(ngModel)]="form.groupType"> 
            <span style="color: #b3d6fc;"> Professeur </span> 
          <input type="radio" value=3 name="groupType" [(ngModel)]="form.groupType"> 
            <span style="color: #b3d6fc;"> Etudiant </span>  
        </div>

        <div class="wrap-input100">
          <input class="input100" type="text" [value]="socialUser.lastName" readonly>
        </div>

        <div class="wrap-input100">
          <input class="input100" type="text" [value]="socialUser.firstName" readonly>
        </div>

        <div class="wrap-input100">
          <input class="input100" type="text" [value]="socialUser.email" readonly>
        </div>

        <div *ngIf="form.groupType==3">

          <div class="wrap-input100 validate-input">
            <input class="input100" type="text" #code_etudiant="ngModel" name="code_etudiant" 
            placeholder="Code d'étudiant*" required maxlength="10" [(ngModel)]="form.code_etudiant"> 
            <div *ngIf="code_etudiant.errors && (code_etudiant.dirty || code_etudiant.touched)">
              <div [hidden]="!code_etudiant.errors?.required" class="alert-validate" 
                data-validate="Entrer le code d'étudiant"></div>
              <div [hidden]="!code_etudiant.errors?.maxlength" class="alert-validate" 
                data-validate="Ce champ ne peut pas comporter plus de 10 caractères."></div>
            </div>
          </div>

          <div class="wrap-input100 validate-input">
            <select class="input100" type="text" name="filiere" placeholder="Filiére" [(ngModel)]="form.filiere" style=" border:0px; outline:0px;" pattern="^[A-Z]{0,4}$" #filiere="ngModel">
              <option *ngFor="let filiere of filieres" [ngValue]="filiere">
                {{ filiere }}
              </option>
            </select>
            <div *ngIf="filiere.errors && (filiere.dirty || filiere.touched)">
              <div [hidden]="!filiere.errors?.pattern" class="alert-validate" 
                data-validate="Choisissez votre filière*"></div>
            </div>
          </div>

          <div class="wrap-input100">
            <input class="input100" type="text" name="promotion" placeholder="Promotion*" [(ngModel)]="form.promotion" #promotion="ngModel" required pattern="^20\d{2}$">
            <div *ngIf="promotion.errors && (promotion.dirty || promotion.touched)">
              <div [hidden]="!promotion.errors?.required" class="alert-validate" 
                data-validate="Entrer la promotion"></div>
              <div [hidden]="!promotion.errors?.pattern" class="alert-validate" 
                data-validate="Entrer une date valide entre 2000 et 2099"></div>
            </div>
          </div>

          <div class="wrap-input100">
            <input class="input100" type="text" name="email_perso" placeholder="Email personnel" [(ngModel)]="form.email_perso" #email_perso="ngModel" pattern="^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$">
            <div *ngIf="email_perso.errors && (email_perso.dirty || email_perso.touched)">
              <div [hidden]="!email_perso.errors?.pattern" class="alert-validate" 
                data-validate="Veuillez entrer un email valide !"></div>
            </div>
          </div>

          <div class="wrap-input100">
            <input class="input100" type="text" name="telephone" placeholder="Téléphone*" required [(ngModel)]="form.telephone" #telephone="ngModel" pattern="^\+[1-9]{1}[0-9]{3,14}$">
            <div *ngIf="telephone.errors && (telephone.dirty || telephone.touched)">
              <div [hidden]="!telephone.errors?.required" class="alert-validate" 
                data-validate="Entrer le numéro téléphone"></div>
              <div [hidden]="!telephone.errors?.pattern" class="alert-validate" 
                data-validate="Veuillez entrer un numéro de téléphone valide (Format: +...) !"></div>
            </div>
          </div>

        </div>

        <div *ngIf="form.groupType==2">

          <div class="wrap-input100">
            <input class="input100" type="text" name="email_perso" placeholder="Email personnel" [(ngModel)]="form.email_perso" #email_perso="ngModel" pattern="^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$">
            <div *ngIf="email_perso.errors && (email_perso.dirty || email_perso.touched)">
              <div [hidden]="!email_perso.errors?.pattern" class="alert-validate" 
                data-validate="Veuillez entrer un email valide !"></div>
            </div>
          </div>

          <div class="wrap-input100 validate-input">
            <select class="input100" type="text" name="departement" placeholder="Departement*" [(ngModel)]="form.departement" style=" border:0px; outline:0px;" pattern="^[A-Z]{0,4}$" #departement="ngModel">
              <option *ngFor="let departement of departements" [ngValue]="departement">
                {{ departement }}
              </option>
            </select>
            <div *ngIf="departement.errors && (departement.dirty || departement.touched)">
              <div [hidden]="!departement.errors?.pattern" class="alert-validate" 
                data-validate="Choisissez votre departement*"></div>
            </div>
          </div>

          <div class="wrap-input100">
            <input class="input100" type="text" name="telephone" placeholder="Téléphone" [(ngModel)]="form.telephone" #telephone="ngModel" pattern="^\+[1-9]{1}[0-9]{3,14}$">
            <div *ngIf="telephone.errors && (telephone.dirty || telephone.touched)">
              <div [hidden]="!telephone.errors?.pattern" class="alert-validate" 
                data-validate="Veuillez entrer un numéro de téléphone valide (Format: +...) !"></div>
            </div>
          </div>

        </div>

        <div class="wrap-input100 validate-input">
            <input class="input100" type="text" name="username" placeholder="Nom d'utilisateur*" required maxlength="200"
            [(ngModel)]="form.username" #username="ngModel">
            <div *ngIf="username.errors && (username.dirty || username.touched)">
              <div [hidden]="!username.errors?.required" class="alert-validate" 
                data-validate="Entrer le nom d'utilisateur"></div>
              <div [hidden]="!username.errors?.maxlength" class="alert-validate" 
                data-validate="Ce champ ne peut pas comporter plus de 200 caractères."></div>
            </div>
        </div>

        <div class="wrap-input100 validate-input">
          <span class="btn-show-pass" (click)="PasswordEye()">
            <i class="zmdi zmdi-eye" id="btn-show-pass"></i>
          </span>
          <input class="input100" type="password" name="password" placeholder="Mot de passe*" required maxlength="200"
          [(ngModel)]="form.password" #password="ngModel" id="password">
            <div *ngIf="password.errors && (password.dirty || password.touched)">
              <div [hidden]="!password.errors?.required" class="alert-validate" 
                data-validate="Entrer le mot de passe"></div>
              <div [hidden]="!password.errors?.maxlength" class="alert-validate" 
                data-validate="Ce champ ne peut pas comporter plus de 200 caractères."></div>
            </div>
        </div>

        <div class="text-center p-t-115">
          <span class="txt1" id="ValidityFormWarn" style="color: salmon;display: none;" >Veuillez vérifier que tout les champs sont bien remplies !</span>
        </div>

        <div class="container-login100-form-btn">
          <div class="wrap-login100-form-btn">
            <div class="login100-form-bgbtn"></div>
            <div style="display:inline-block; position:relative;" class="login100-form-btn" (click)="ValidityWarn()">
            <button class="login100-form-btn" (click)="onSubmit()" id="submitBtn" [disabled]="!registerForm.form.valid">
              s'inscrire
            </button>
            </div>          
          </div>
        </div>

        <div class="form-group">
          <div class="text-center p-t-115" role="alert" *ngIf="isFormFull && isSignUpFailed" >
            <span class="txt1" style="color: salmon;">{{ errorMessage }} </span>
          </div>
        </div>

        <div class="text-center p-t-115">
          <span class="txt1">
            Vous avez un compte?
          </span>

          <a class="txt2" routerLink="/login" >
            Je me connecte
          </a>
        </div>



      </form>
    </div>
  </div>
</div>  


<div class="container-login100" *ngIf="isSuccessful">
  <div class="wrap-login100">
    <div class="login100-form">
      <span class="login100-form-title p-b-26"> Votre inscription est réussi!</span>

      <div class="container-login100-form-btn">
        <div class="wrap-login100-form-btn">
          <div class="login100-form-bgbtn"></div>
          <a class="login100-form-btn" routerLink="/login">
            Se connecter ->
          </a>
                      
        </div>
      </div>
    </div>

  </div>
</div>
